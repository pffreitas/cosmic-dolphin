alerts:
- rule: DEPLOYMENT_FAILED

envs:
- key: NODE_ENV
  scope: RUN_AND_BUILD_TIME
  value: production
- key: DATABASE_URL
  scope: RUN_AND_BUILD_TIME
  value: ${DATABASE_URL}
- key: REDIS_HOST
  scope: RUN_AND_BUILD_TIME
  value: ${REDIS_HOST}
- key: REDIS_PORT
  scope: RUN_AND_BUILD_TIME
  value: ${REDIS_PORT}
- key: REDIS_PASSWORD
  scope: RUN_AND_BUILD_TIME
  value: ${REDIS_PASSWORD}
- key: SUPABASE_URL
  scope: RUN_AND_BUILD_TIME
  value: ${SUPABASE_URL}
- key: SUPABASE_SERVICE_ROLE_KEY
  scope: RUN_AND_BUILD_TIME
  value: ${SUPABASE_SERVICE_ROLE_KEY}
- key: WORKER_PORT
  scope: RUN_AND_BUILD_TIME
  value: 3000

name: cosmic-dolphin-worker-nodejs
region: nyc

workers:
- name: cosmic-dolphin-worker-nodejs
  image:
    registry_type: DOCR
    repository: cosmic-dolphin-worker
    tag: ${IMAGE_TAG}
  instance_count: 1
  instance_size_slug: apps-s-1vcpu-0.5gb